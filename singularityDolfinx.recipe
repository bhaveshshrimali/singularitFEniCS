Bootstrap: docker
From: dolfinx/dolfinx

%post
    apt-get -y update
    apt-get -y install software-properties-common ffmpeg curl build-essential python3-tk
    export PETSC_DIR=/usr/local/petsc
    export LD_LIBRARY_PATH="$PETSC_DIR/lib:{LD_LIBRARY_PATH}"
    git clone https://github.com/jorgensd/dolfinx_mpc.git
    cd dolfinx_mpc
    rm -rf build
    mkdir -p build
    cd build
    cmake -G Ninja -DCMAKE_BUILD_TYPE=Developer ../cpp/
    ninja -j3 install
    cd ../python
    pip3 install . --upgrade
%runscript
    exec /bin/bash -i   